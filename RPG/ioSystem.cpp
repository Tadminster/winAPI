#include "ioSystem.h"

int ioSystem::input_number(int min, int max)
{
	{
		std::string inputNum;
		int input{ 0 };
		while (1)
		{
			std::cin >> inputNum;

			try
			{
				input = std::stoi(inputNum);
			}
			// string 체크
			catch (const std::invalid_argument& e)
			{
				std::cout << "[ERROR] '문자'가 입력되었습니다." << std::endl;
				continue;
			}

			//if (inputNum == "0") return 9999;

			// overflow 체크
			if (input < min || input > max)
				std::cout << "[ERROR] 범위안의 값을 입력하십시오." << std::endl;
			else break;

			std::cout << std::endl;
		}

		return input;
	}
}

int ioSystem::input_arrow_col(std::string* texts, int arraySize)
{
	int current{ 1 };
	while (true) {
		system("cls");
		ioSystem::output_text(texts, arraySize, current);

		if (char ch = _getch();
			ch == 72) // up arrow key
			current = std::max(--current, 1);

		else if (ch == 80) // down arrow key
			current = std::min(++current, arraySize-1);

		else if (ch == 13) // enter key 
			return current;
	}
}

int ioSystem::input_arrow_all()
{
	while (true) {
		if (char ch = _getch();
			ch == 72)		// UP arrow
			return 1;
		else if (ch == 80)	// DOWN arrow
			return 2;
		else if (ch == 75)	// LEFT arrow
			return 3;
		else if (ch == 77)	// RIGHT arrow
			return 4;
		else if (ch == 's') // SAVE
			return 0;
		else if (ch == 27)	// ESC
			return 999;
	}
}

void ioSystem::output_text(std::string* texts, int arraySize, int current)
{
	for (int i = 0; i < arraySize; i++)
	{
		if (current == i) std::cout << "\033[33m";
		std::cout << texts[i];
		if (current == i) std::cout << "\033[0m";
		std::cout << std::endl;
	}
}

void ioSystem::output_img_main()
{
	std::cout << 
		"                                      ......................                                   " << std::endl <<
		"                                   . ............................. .                           " << std::endl <<
		"                                   ...................... ......... .                          " << std::endl <<
		"                              ..........................: ...........                          " << std::endl <<
		"                             .........::.:::::::::::.:.................                        " << std::endl <<
		"                      ...    .......::::::^^^^^^^^^:^::::................                      " << std::endl <<
		"                      ....  ......:::^:^^^~^~~~~~~^^^^:^:::::............        .             " << std::endl <<
		"                 . : .........::::^^^~^~~~!!!77777!~~^^^^:::^::...........                     " << std::endl <<
		"          ...   .........:::::^^^^~~~~!777JYYYYYY?77!!!~~~^^^^^:::::.....:                     " << std::endl <<
		"...     ..............::::::^^^^^~~!77JPBB#######BBGPY7!!!!!~^^^::::::::.~                   .." << std::endl <<
		"... :   ............:::::::^~~^~~!7?5B#&############&#GY??77~~~^^^::::::::        ............." << std::endl <<
		"...    ....... ..:::::::::^^~~~!7YG#&###################BP?77~~~^~^:::::::..      :............" << std::endl <<
		"...   :....::.  :::::::::^^^~~77J#&########################J??!~^^^^:^?:::::.      :..........." << std::endl <<
		"..... ...::::::::::::::::^~^~~J?B##################BB#######YJ7~~~^::^~::::::.     :..........." << std::endl <<
		"........:::::::::::::::::~!~~!?P#############G#####BB#######BJ7!~~^::::::::::::     ..........." << std::endl <<
		"........:::::::::::::::^^~~^!7J###########################BB&?J7~~~::::::::::::     ..........." << std::endl <<
		"....  ..::::::::::::::::^^~^!7?#####B########################??!~~~^^:::::::::      ..........." << std::endl <<
		"....   .::::::::::::^!:^^^~^!??JG###B############B###########?7~~^~~::::::::::: ::.::.........." << std::endl <<
		"....   .::::::::::::~!:^^^^~!777#################BB##########7!!!^~^::::  :::::::::::.........." << std::endl <<
		"....   .:::::::::::::::^^^~~~!!J##########################&##?77~~~^::::!  :::::::::::........." << std::endl <<
		".....  .:::::::::::::::^^^^~~77?############################57?7!~!^^^::::::::::::::::........." << std::endl <<
		".....  .:::::::::::::::^^^^!~7??#############################57J!~~^^:::::::~^^:::::::........." << std::endl <<
		".....   :.:::::::::~!::^^^~!!???#################BB###########!?!~~^::::::      ^:::::........." << std::endl <<
		".....    . ::::::     ::^^~~77??#################BB#########&Y?7!~~^^::::        :.:::........." << std::endl <<
		"......    .:::::       7:^~~!~J?BB#########################BG??7!~~^::::        ~:7^..........." << std::endl <<
		"......:   :...:::...::::~:^~~!??BB####G#####################J?7!!~^:!::       :::: :..........." << std::endl <<
		"........   ~:.!:^^~~!:::::~~!7??############################B??7~~::::     ::  :::............." << std::endl <<
		"...... .::!....:...:^~~~^!Y7~7?G############################&J?~:::       ~.~YY7!^^:.:! ......." << std::endl <<
		".        ..~::: ..:^~~!!:~?57??#&GB#####################B###B?7~BG5?!??~~:.:~!~^:....:^........" << std::endl <<
		"           ::7! . :!JP5Y?:~~7Y!JG?YPG&##################B#BY7!JYJ?7.YJ~~:.~Y~^^......:........." << std::endl <<
		"           .:::... .~7?5G?.:!^~~!777YB#############BBYGB5J7!~^77~^^.??^.:~J7^!7^^^.~^:. .  ...." << std::endl <<
		"            ..::   ..:!Y5P!.~7~~~~~!!7?P&B57JGJ55#5???77!~^^~7~~~:^!~^:.~!~^7PY?~.!!^:.        " << std::endl <<
		"               .::.  .:~?Y~.7Y5G?:~~!!7JYJ!5?7~~~J??!~~!????????JY55YYJ!^7PY5Y!^:.:::..        " << std::endl <<
		"          . :^~!?J?!!^^:....:^?Y!!PGPYJYG####BGPPYY??JJJ?YPBGGPP55555555!7PY?^:.......         " << std::endl <<
		"      .^^7??7????J5PPPPY7?~^^~~!?5B############&###5YYYJP###BBGPGGPYJ!!7^!!!7::......          " << std::endl <<
		"        ..:?~~!7?YGBGGPGGGG55BBBB###################&#B####BBBBGPP5YJJ?Y!::~!:.. .:.           " << std::endl <<
		"    .::.  .^!7~:~7?JYYJY555GBB########################BBBP5P55P5YYYYY!::.^7?::..~:..           " << std::endl <<
		"    :!~!:  .:7J! .:^7?!7JYYYPBB##BBB####BBB#BB###BGYYY7!!~::::7!::7^... :JY7:. .!..            " << std::endl <<
		"    .:~~!^ ....!!   .^~.:^!JY5GGBBG5PB#BGGP5Y777J~^::::::::::^7.::~7...^JJ!~:. . ..            " << std::endl <<
		"       :^^  .. .:    ^!    .:~Y5P55YJYYP5J7^7!7J5YJJ7!^::::::^7.^!~7..^J!^:...^!!:.            " << std::endl <<
		"         ..    ..    ^! ......~5J^:^:^^7??J5PGBBBBPPPP5J^::::::::.~7.:!!^:....J?7!^.           " << std::endl <<
		"         .     .:    ::.......^?.~?Y5555PPBB###BPGGP5Y7^:::::::::.~7.7!^:......:.. ..          " << std::endl <<
		"                 .............^?.^^755GGGGGPGP5???7~^:^^^^^^^::::.~!.?!^...... .. . .   .     ." << std::endl <<
		"            ..................^7...:^^!J5Y!!!^:::^~!??Y5P5YY5J7~^:::.:~!.............~^ ......." << std::endl;
}
